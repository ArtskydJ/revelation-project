<span class="bar" style="{{style}}">
	<slot>&nbsp;</slot>
</span>

<style>
.bar {
	white-space: nowrap;

	-webkit-border-radius: 4px;
	-moz-border-radius: 4px;
	border-radius: 4px;
}
</style>

<script>
import { contrastRatio } from 'chromatism'

const joinTruthy = (...args) => args.filter(value => value).join(' ')

export default {
	computed: {
		foregroundColor: color => Array.isArray(color)
			? `linear-gradient(to right, ${ color.map(c => contrastRatio(c).hex).join(', ') })`
			: contrastRatio(color).hex,
		backgroundStyle: color => Array.isArray(color)
			? `background: linear-gradient(to right, ${color.join(', ')})`
			: `background-color: ${color}`,
		colorStyle:  (backgroundStyle, foregroundColor) => `${backgroundStyle}; color: ${foregroundColor};`,
		widthStyle: width => width && `width: ${width};`,
		widthOrPaddingStyle: widthStyle => widthStyle || `padding: 4px 8px;`,
		style: (widthOrPaddingStyle, colorStyle) => joinTruthy(widthOrPaddingStyle, colorStyle)
	},
	oncreate() {
		console.log(this.get('backgroundStyle'))
	}
}
</script>
